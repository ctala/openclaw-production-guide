{
  "embeddings": {
    "enabled": true,
    "provider": "openai",
    "model": "text-embedding-3-small",
    "batchEnabled": true,
    "debounceMs": 30000,
    "lazyIndexing": true,
    "maxCharsPerChunk": 2000,
    "overlapChars": 200
  },
  "notes": {
    "why_openai": "Most cost-effective option with Batch API support. First indexing ~$0.003, then cached.",
    "why_batch": "Prevents blocking main conversation while indexing. Background processing only.",
    "why_debounce": "Waits 30s before indexing new files. Avoids re-indexing rapidly changing files.",
    "why_lazy": "Only indexes files when memory_search is called, not on every file write.",
    "cost": "~$0.003 one-time indexing for 38 files (382 chunks), then free with cache.",
    "performance": "First query 3.6s (cold), subsequent queries <500ms (cached).",
    "tested_on": "38 files, 382 chunks, 0 failures (2026-02-18)"
  },
  "alternatives": {
    "local_qmd": {
      "enabled": false,
      "provider": "qmd",
      "model": "local",
      "cost": "$0 (runs locally)",
      "disk_usage": "~1GB for models",
      "performance": "Slower than OpenAI (3-5s first query)",
      "privacy": "100% local, no external API calls",
      "setup_time": "1 hour (download models, configure)"
    },
    "voyage": {
      "enabled": false,
      "provider": "voyage",
      "model": "voyage-2",
      "cost": "$0.0001/1K tokens (10x cheaper than OpenAI)",
      "performance": "Similar to OpenAI",
      "why_not_recommended": "Requires separate API key, less mature than OpenAI"
    }
  },
  "implementation": {
    "step_1": "Copy this config to your OpenClaw config.json (embeddings section)",
    "step_2": "Set OPENAI_API_KEY environment variable",
    "step_3": "Restart OpenClaw: `openclaw gateway restart`",
    "step_4": "Test: Use memory_search tool on any query",
    "step_5": "Verify: Check logs for 'Embeddings batch processed' (not 'blocking')"
  },
  "troubleshooting": {
    "blocking_error": "If you see 'Batch API disabled', check OPENAI_API_KEY is set correctly",
    "slow_queries": "First query is always slow (cold start). Subsequent queries use cache.",
    "failed_chunks": "Check file encoding (must be UTF-8). Binary files are skipped automatically.",
    "high_cost": "Cost only applies on first indexing. Re-indexing same content is free (cached)."
  }
}
